# 布料识别系统 - Uni-app 入门指南

## 项目简介

这是一个基于 Uni-app 框架开发的布料识别小程序，主要用于识别不同类型的布料材质。用户可以通过拍照或从相册选择图片，系统会识别布料类型并显示详细信息。

## 项目功能

- 📸 **拍照识别**：使用手机相机拍摄布料照片进行识别
- 📁 **相册选择**：从手机相册中选择布料照片
- 📊 **识别结果**：显示布料类型、材质成分、特点等信息
- 📝 **历史记录**：保存所有识别记录，支持查看详情
- 💾 **保存功能**：可以将重要结果保存起来
- 🔄 **重新识别**：支持多次识别操作

## 项目结构

```
ClothesDeepLearning-Frontend/
├── pages/                 # 页面目录
│   ├── index/            # 首页
│   │   └── index.vue     # 首页文件
│   ├── history/          # 历史记录页
│   │   └── history.vue   # 历史记录文件
│   └── result/           # 结果页
│       └── result.vue    # 识别结果页
├── static/               # 静态资源
│   ├── logo.png          # 应用图标
│   ├── tab-home.png      # 首页图标
│   ├── tab-home-active.png   # 首页选中图标
│   ├── tab-history.png   # 历史记录图标
│   └── tab-history-active.png # 历史选中图标
├── unpackage/            # 编译输出目录
├── pages.json            # 页面配置文件
├── manifest.json         # 应用配置文件
└── App.vue              # 应用入口文件
```

## 一、Vue.js 基础知识

### 1.1 Vue 实例

每个 Vue 页面是一个组件，包含三个部分：
```vue
<template>
  <!-- HTML 模板 -->
</template>

<script>
  // JavaScript 逻辑
  export default {
    data() {
      return {
        // 数据
      }
    },
    methods: {
      // 方法
    }
  }
</script>

<style>
  /* CSS 样式 */
</style>
```

### 1.2 数据绑定

- **插值表达式**：`{{ message }}`
- **属性绑定**：`:src="imagePath"`
- **条件渲染**：`v-if="condition"`
- **列表渲染**：`v-for="item in list"`

### 1.3 事件处理

```vue
<!-- 点击事件 -->
<button @click="handleClick">点击我</button>

<!-- 带参数的事件 -->
<button @click="save(item)">保存</button>
```

## 二、Uni-app 框架介绍

### 2.1 什么是 Uni-app？

Uni-app 是一个使用 Vue.js 开发所有前端应用的框架，开发者编写一套代码，可发布到iOS、Android、Web、以及各种小程序平台。

### 2.2 Uni-app 与 Vue 的关系

- 基于 Vue.js 语法
- 扩展了 Vue 的组件和 API
- 提供了跨平台的能力

### 2.3 Uni-app 特点

- **跨平台**：一套代码多端运行
- **组件丰富**：内置大量组件
- **API 丰富**：调用原生能力
- **生态完善**：插件市场、开发工具

## 三、核心知识点详解

### 3.1 页面配置 (pages.json)

类似于微信小程序的 app.json，用于配置页面路由、导航栏、tabBar等。

```json
{
  "pages": [
    {
      "path": "pages/index/index",
      "style": {
        "navigationBarTitleText": "布料识别"
      }
    }
  ],
  "tabBar": {
    "list": [
      {
        "pagePath": "pages/index/index",
        "iconPath": "static/tab-home.png",
        "selectedIconPath": "static/tab-home-active.png",
        "text": "首页"
      }
    ]
  }
}
```

### 3.2 生命周期函数

```javascript
export default {
  // 页面加载时触发
  onLoad() {
    console.log('页面加载')
  },

  // 页面显示时触发
  onShow() {
    console.log('页面显示')
  },

  // 页面隐藏时触发
  onHide() {
    console.log('页面隐藏')
  },

  // 页面卸载时触发
  onUnload() {
    console.log('页面卸载')
  }
}
```

### 3.3 数据存储

```javascript
// 同步存储
uni.setStorageSync('key', value)

// 同步获取
const value = uni.getStorageSync('key')

// 异步存储
uni.setStorage({
  key: 'key',
  data: value,
  success: function () {
    console.log('存储成功')
  }
})

// 异步获取
uni.getStorage({
  key: 'key',
  success: function (res) {
    console.log(res.data)
  }
})
```

### 3.4 页面跳转

```javascript
// 保留当前页面，跳转到应用内的某个页面
uni.navigateTo({
  url: '/pages/result/result?id=1'
})

// 关闭当前页面，跳转到应用内的某个页面
uni.redirectTo({
  url: '/pages/index/index'
})

// 跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面
uni.switchTab({
  url: '/pages/history/history'
})

// 关闭所有页面，打开到应用内的某个页面
uni.reLaunch({
  url: '/pages/index/index'
})

// 返回上一页面
uni.navigateBack()
```

### 3.5 API 调用

#### 网络请求

```javascript
uni.request({
  url: 'https://api.example.com/data',
  method: 'GET',
  data: {
    param1: 'value1'
  },
  success: (res) => {
    console.log('请求成功', res.data)
  },
  fail: (err) => {
    console.error('请求失败', err)
  }
})
```

#### 文件上传

```javascript
uni.uploadFile({
  url: 'https://api.example.com/upload',
  filePath: '/path/to/file',
  name: 'file',
  formData: {
    'user': 'test'
  },
  success: (res) => {
    console.log('上传成功', res.data)
  }
})
```

### 3.6 媒体 API

#### 选择图片

```javascript
uni.chooseImage({
  count: 1, // 默认9
  sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图
  sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机
  success: function (res) {
    console.log('临时文件路径', res.tempFilePaths)
  }
})
```

#### 拍照

```javascript
uni.chooseImage({
  count: 1,
  sourceType: ['camera'],
  success: (res) => {
    this.imagePath = res.tempFilePaths[0]
  }
})
```

## 四、项目功能实现详解

### 4.1 首页实现

#### 4.1.1 模板结构

```vue
<template>
  <view class="container">
    <!-- 图片预览 -->
    <image v-if="imagePath" :src="imagePath" mode="aspectFit"></image>

    <!-- 按钮组 -->
    <button @click="chooseFromAlbum">从相册选择</button>
    <button @click="takePhoto">拍照识别</button>

    <!-- 识别按钮 -->
    <button @click="recognizeFabric">开始识别</button>
  </view>
</template>
```

#### 4.1.2 核心方法

```javascript
methods: {
  // 从相册选择
  chooseFromAlbum() {
    uni.chooseImage({
      sourceType: ['album'],
      success: (res) => {
        this.imagePath = res.tempFilePaths[0]
      }
    })
  },

  // 拍照
  takePhoto() {
    uni.chooseImage({
      sourceType: ['camera'],
      success: (res) => {
        this.imagePath = res.tempFilePaths[0]
      }
    })
  },

  // 识别布料
  recognizeFabric() {
    // 上传图片并识别
    // 保存结果
    // 跳转到结果页
  }
}
```

### 4.2 历史记录页面

#### 4.2.1 数据管理

```javascript
data() {
  return {
    history: [], // 所有历史记录
    savedHistory: [], // 已保存的记录
    currentTab: 'all' // 当前标签
  }
},

computed: {
  filteredHistory() {
    return this.currentTab === 'all' ? this.history : this.savedHistory
  }
}
```

#### 4.2.2 列表渲染

```vue
<scroll-view scroll-y>
  <view
    class="history-item"
    v-for="item in filteredHistory"
    :key="item.id"
    @click="viewDetail(item)"
  >
    <image :src="item.image" mode="aspectFill"></image>
    <view class="item-info">
      <text>{{ item.fabricType }}</text>
      <text>{{ item.material }}</text>
    </view>
  </view>
</scroll-view>
```

### 4.3 结果页面

#### 4.3.1 接收参数

```javascript
onLoad(options) {
  if (options.data) {
    this.resultData = JSON.parse(decodeURIComponent(options.data))
  }
}
```

#### 4.3.2 数据展示

```vue
<template>
  <view>
    <image :src="resultData.image"></image>
    <text>{{ resultData.fabricType }}</text>
    <text>{{ resultData.material }}</text>
  </view>
</template>
```

## 五、样式指南

### 5.1 尺寸单位

- **rpx**：响应式像素，规定屏幕宽为750rpx
- **px**：普通像素
- **rem**：根元素字体大小的倍数

```css
/* 适配不同屏幕 */
.container {
  width: 750rpx; /* 在任何屏幕上都是100%宽度 */
  padding: 20rpx; /* 自动适配 */
}
```

### 5.2 Flex 布局

```css
.flex-container {
  display: flex;
  flex-direction: row; /* 方向：row/column */
  justify-content: center; /* 主轴对齐 */
  align-items: center; /* 交叉轴对齐 */
  flex-wrap: wrap; /* 换行 */
}
```

### 5.3 样式预处理器

Uni-app 支持：
- SCSS/SASS
- LESS
- Stylus

使用时需要安装对应的预处理器。

## 六、开发工具与调试

### 6.1 HBuilderX

官方推荐的IDE，提供：
- 代码提示
- 实时预览
- 云端打包
- 真机调试

### 6.2 调试方法

1. **控制台输出**：`console.log()`
2. **Vue Devtools**：在HBuilderX中查看
3. **真机调试**：连接手机查看效果
4. **各平台调试**：模拟不同平台

### 6.3 常见问题解决

1. **图片不显示**：
   - 检查路径是否正确
   - 确认图片格式是否支持
   - 本地路径使用 `/static/` 开头

2. **页面跳转失败**：
   - 检查路径是否在 pages.json 中配置
   - 确认使用正确的跳转API

3. **样式不生效**：
   - 检查选择器优先级
   - 确认是否使用了正确的单位

## 七、进阶知识

### 7.1 组件封装

```javascript
// components/MyButton/MyButton.vue
<template>
  <button class="my-btn" @click="handleClick">
    <slot></slot>
  </button>
</template>

export default {
  methods: {
    handleClick() {
      this.$emit('click')
    }
  }
}
```

### 7.2 状态管理

可以使用 Vuex 管理复杂状态：

```javascript
// store/index.js
import Vue from 'vue'
import Vuex from 'vuex'

Vue.use(Vuex)

export default new Vuex.Store({
  state: {
    count: 0
  },
  mutations: {
    increment(state) {
      state.count++
    }
  }
})
```

### 7.3 插件使用

```javascript
// 在 main.js 中
import plugin from 'uni-plugin'
Vue.use(plugin)
```

## 八、性能优化

### 8.1 图片优化

1. 使用合适的图片格式
2. 压缩图片大小
3. 使用懒加载

### 8.2 代码优化

1. 减少不必要的计算
2. 使用 computed 缓存数据
3. 避免频繁的DOM操作

### 8.3 包大小优化

1. 按需引入组件
2. 使用 tree shaking
3. 分包加载

## 九、项目部署

### 9.1 小程序发布

1. 在HBuilderX中点击发行
2. 选择小程序平台
3. 配置AppID等信息
4. 上传到开发者工具
5. 提交审核

### 9.2 App发布

1. 申请开发者账号
2. 生成证书
3. 云端打包
4. 下载安装包
5. 上传应用商店

## 十、学习资源

### 10.1 官方文档
- [Uni-app 官网](https://uniapp.dcloud.io/)
- [Vue.js 中文文档](https://cn.vuejs.org/)

### 10.2 视频教程
- DCloud 官方视频教程
- B站 Uni-app 入门教程

### 10.3 社区资源
- DCloud 官方论坛
- GitHub 示例项目
- 插件市场

## 总结

通过这个项目，你将学到：
- Vue.js 基础语法
- Uni-app 框架使用
- 移动端开发技巧
- 图片处理和识别
- 数据存储和管理
- 跨平台开发知识

建议按照以下步骤学习：
1. 掌握 Vue.js 基础
2. 学习 Uni-app API
3. 修改现有功能
4. 添加新功能
5. 优化性能
6. 发布应用

祝你学习愉快！🎉